<?php
	require_once('function.php');
	require_once('./lib/nusoap.php');
	$server = new soap_server;
    //避免乱码
    $server->soap_defencoding = 'UTF-8';
    $server->decode_utf8 = false;
    $server->xml_encoding = 'UTF-8';

    //开启接口服务
    $server->configureWSDL('student_judge');
    $server->configureWSDL('student_get_my_info');
    $server->configureWSDL('student_update_my_info');
    $server->configureWSDL('student_update_my_pwd');
    $server->configureWSDL('admin_judge');
    $server->configureWSDL('Web Service');


    //注册相关接口
    $server->register( 'student_judge',array("sid"=>"xsd:string","password"=>"xsd:string"),array("return"=>"xsd:string"));
    $server->register( 'student_get_my_info',array("sid"=>"xsd:string","password"=>"xsd:string"),array("return"=>"xsd:string"));
    $server->register( 'student_update_my_info',array("sid"=>"xsd:string","password"=>"xsd:string","name"=>"xsd:string","sex"=>"xsd:int","idnum"=>"xsd:string","email"=>"xsd:string","phone"=>"xsd:string","addr"=>"xsd:string","pic"=>"xsd:string"),array("return"=>"xsd:string"));
    $server->register( 'student_update_my_pwd',array("sid"=>"xsd:string","password"=>"xsd:string"),array("return"=>"xsd:string"));
    $server->register( 'admin_judge',array("username"=>"xsd:string","password"=>"xsd:string"),array("return"=>"xsd:string"));

    $HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';

    $server->service($HTTP_RAW_POST_DATA);
?>